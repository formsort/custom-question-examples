import{S as ee,i as te,s as ne,l as V,m as D,p as Q,h as g,q as E,b as F,n as U,K as re,o as oe,u as ie,a as se,v as ue,c as ae,L as p,J as C,M as fe}from"../chunks/index-1a486cda.js";var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d={},R={},O={};Object.defineProperty(O,"__esModule",{value:!0});var y;(function(e){e.SET_QUESTION_SIZE_MSG="\u0192_sqz",e.REQUEST_ANSWER_VALUE_MSG="\u0192_rav",e.SET_ANSWER_VALUE_MSG="\u0192_sav",e.REQUEST_SEMANTIC_ANSWER_VALUE_MSG="\u0192_rsv",e.SET_SEMANTIC_ANSWER_VALUE_MSG="\u0192_ssv",e.REQUEST_ANSWERS_MSG="\u0192_ra",e.SET_ANSWERS_MSG="\u0192_sa",e.REQUEST_RESPONDER_UUID_MSG="\u0192_rru",e.SET_RESPONDER_UUID_MSG="\u0192_sru",e.CLEAR_ANSWER_VALUE_MSG="\u0192_cav"})(y||(y={}));O.default=y;var A={};Object.defineProperty(A,"__esModule",{value:!0});var L;(function(e){e.FlowLoaded="FlowLoaded",e.FlowClosed="FlowClosed",e.UrlOpened="UrlOpened",e.StepLoaded="StepLoaded",e.StepCompleted="StepCompleted",e.EmailCollected="EmailCollected",e.FlowFinalized="FlowFinalized",e.PhoneCollected="PhoneCollected"})(L||(L={}));A.default=L;var T={};Object.defineProperty(T,"__esModule",{value:!0});var b;(function(e){e.EMBED_EVENT_MSG="\u0192_wee",e.EMBED_REDIRECT_MSG="\u0192_wer",e.EMBED_RESIZE_MSG="\u0192_wes",e.EMBED_TOKEN_REQUEST_MSG="\u0192_wetreq",e.EMBED_TOKEN_RESPONSE_MSG="\u0192_wetres",e.EMBED_UNAUTHORIZED_MSG="\u0192_weua"})(b||(b={}));T.default=b;var q={};Object.defineProperty(q,"__esModule",{value:!0});var B={};Object.defineProperty(B,"__esModule",{value:!0});var K={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenRequestPayload=void 0,function(t){t.ID="ID"}(e.TokenRequestPayload||(e.TokenRequestPayload={}))})(K);(function(e){var t=v&&v.__createBinding||(Object.create?function(i,u,f,l){l===void 0&&(l=f),Object.defineProperty(i,l,{enumerable:!0,get:function(){return u[f]}})}:function(i,u,f,l){l===void 0&&(l=f),i[l]=u[f]}),n=v&&v.__exportStar||function(i,u){for(var f in i)f!=="default"&&!u.hasOwnProperty(f)&&t(u,i,f)};Object.defineProperty(e,"__esModule",{value:!0});var r=O;Object.defineProperty(e,"CustomQuestionMessage",{enumerable:!0,get:function(){return r.default}});var o=A;Object.defineProperty(e,"AnalyticsEventType",{enumerable:!0,get:function(){return o.default}});var s=T;Object.defineProperty(e,"WebEmbedMessage",{enumerable:!0,get:function(){return s.default}}),n(q,e),n(B,e),n(K,e)})(R);var k={},N={},P={exports:{}},h=typeof Reflect=="object"?Reflect:null,W=h&&typeof h.apply=="function"?h.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},S;h&&typeof h.ownKeys=="function"?S=h.ownKeys:Object.getOwnPropertySymbols?S=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:S=function(t){return Object.getOwnPropertyNames(t)};function le(e){console&&console.warn&&console.warn(e)}var x=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}P.exports=a;P.exports.once=ve;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._eventsCount=0;a.prototype._maxListeners=void 0;var j=10;function w(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(e){if(typeof e!="number"||e<0||x(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");j=e}});a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};a.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||x(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function z(e){return e._maxListeners===void 0?a.defaultMaxListeners:e._maxListeners}a.prototype.getMaxListeners=function(){return z(this)};a.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var o=t==="error",s=this._events;if(s!==void 0)o=o&&s.error===void 0;else if(!o)return!1;if(o){var i;if(n.length>0&&(i=n[0]),i instanceof Error)throw i;var u=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw u.context=i,u}var f=s[t];if(f===void 0)return!1;if(typeof f=="function")W(f,this,n);else for(var l=f.length,M=X(f,l),r=0;r<l;++r)W(M[r],this,n);return!0};function Z(e,t,n,r){var o,s,i;if(w(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),i=s[t]),i===void 0)i=s[t]=n,++e._eventsCount;else if(typeof i=="function"?i=s[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),o=z(e),o>0&&i.length>o&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,le(u)}return e}a.prototype.addListener=function(t,n){return Z(this,t,n,!1)};a.prototype.on=a.prototype.addListener;a.prototype.prependListener=function(t,n){return Z(this,t,n,!0)};function ce(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function H(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=ce.bind(r);return o.listener=n,r.wrapFn=o,o}a.prototype.once=function(t,n){return w(n),this.on(t,H(this,t,n)),this};a.prototype.prependOnceListener=function(t,n){return w(n),this.prependListener(t,H(this,t,n)),this};a.prototype.removeListener=function(t,n){var r,o,s,i,u;if(w(n),o=this._events,o===void 0)return this;if(r=o[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,i=r.length-1;i>=0;i--)if(r[i]===n||r[i].listener===n){u=r[i].listener,s=i;break}if(s<0)return this;s===0?r.shift():de(r,s),r.length===1&&(o[t]=r[0]),o.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};a.prototype.off=a.prototype.removeListener;a.prototype.removeAllListeners=function(t){var n,r,o;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),i;for(o=0;o<s.length;++o)i=s[o],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(t,n[o]);return this};function $(e,t,n){var r=e._events;if(r===void 0)return[];var o=r[t];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?_e(o):X(o,o.length)}a.prototype.listeners=function(t){return $(this,t,!0)};a.prototype.rawListeners=function(t){return $(this,t,!1)};a.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):J.call(e,t)};a.prototype.listenerCount=J;function J(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?S(this._events):[]};function X(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function de(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function _e(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function ve(e,t){return new Promise(function(n,r){function o(i){e.removeListener(t,s),r(i)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",o),n([].slice.call(arguments))}Y(e,t,s,{once:!0}),t!=="error"&&he(e,o,{once:!0})})}function he(e,t,n){typeof e.on=="function"&&Y(e,"error",t,n)}function Y(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(s){r.once&&e.removeEventListener(t,o),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Ee=v&&v.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)o.hasOwnProperty(s)&&(r[s]=o[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(N,"__esModule",{value:!0});var pe=P.exports,m=R,me=new Set([m.CustomQuestionMessage.SET_ANSWERS_MSG,m.CustomQuestionMessage.SET_ANSWER_VALUE_MSG,m.CustomQuestionMessage.SET_RESPONDER_UUID_MSG,m.CustomQuestionMessage.SET_SEMANTIC_ANSWER_VALUE_MSG]),Se=function(e){Ee(t,e);function t(){var n=e.call(this)||this;return n.onWindowMessage=function(r){var o=r.data,s=o.type,i=o.payload,u=o.requestId;!s||!me.has(s)||n.emit(s,i,u)},window.addEventListener("message",n.onWindowMessage),n}return t}(pe.EventEmitter);N.default=Se;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=N,n;e.getEmitter=function(){return n||(n=new t.default),n},e.sendMessageToWindowParent=function(r,o,s){if(!window.parent)throw new Error("Custom questions must run within a Formsort flow custom question to work.");window.parent.postMessage({type:r,payload:o,requestId:s},"*")},e.getValueFromWindowParent=function(r,o,s){var i=Math.random().toString();return new Promise(function(u){var f=function(l,M){i===M&&(u(l),e.getEmitter().removeListener(o,f))};e.getEmitter().on(o,f),e.sendMessageToWindowParent(r,s,i)})}})(k);Object.defineProperty(d,"__esModule",{value:!0});var c=R,_=k;d.setQuestionSize=function(e,t){_.sendMessageToWindowParent(c.CustomQuestionMessage.SET_QUESTION_SIZE_MSG,{width:e,height:t})};var ge=d.getAnswerValue=function(){return _.getValueFromWindowParent(c.CustomQuestionMessage.REQUEST_ANSWER_VALUE_MSG,c.CustomQuestionMessage.SET_ANSWER_VALUE_MSG)};d.getSemanticAnswerValue=function(e){return _.getValueFromWindowParent(c.CustomQuestionMessage.REQUEST_SEMANTIC_ANSWER_VALUE_MSG,c.CustomQuestionMessage.SET_SEMANTIC_ANSWER_VALUE_MSG,e)};d.getAllAnswerValues=function(){return _.getValueFromWindowParent(c.CustomQuestionMessage.REQUEST_ANSWERS_MSG,c.CustomQuestionMessage.SET_ANSWERS_MSG)};d.getResponderUuid=function(){return _.getValueFromWindowParent(c.CustomQuestionMessage.REQUEST_RESPONDER_UUID_MSG,c.CustomQuestionMessage.SET_RESPONDER_UUID_MSG)};var we=d.clearAnswerValue=function(){_.sendMessageToWindowParent(c.CustomQuestionMessage.CLEAR_ANSWER_VALUE_MSG)},Me=d.setAnswerValue=function(e){_.sendMessageToWindowParent(c.CustomQuestionMessage.SET_ANSWER_VALUE_MSG,e)};function G(e,t,n){const r=e.slice();return r[4]=t[n],r}function I(e){let t,n=e[4]+"",r,o,s,i;function u(){return e[3](e[4])}return{c(){t=V("button"),r=ie(n),o=se(),this.h()},l(f){t=D(f,"BUTTON",{role:!0,"aria-checked":!0,class:!0});var l=Q(t);r=ue(l,n),o=ae(l),l.forEach(g),this.h()},h(){E(t,"role","radio"),E(t,"aria-checked","false"),E(t,"class","svelte-9avveu"),p(t,"neighbor",e[0]!=null&&Math.abs(e[0]-e[4])===1),p(t,"selected",e[4]===e[0])},m(f,l){F(f,t,l),C(t,r),C(t,o),s||(i=fe(t,"click",u),s=!0)},p(f,l){e=f,l&5&&p(t,"neighbor",e[0]!=null&&Math.abs(e[0]-e[4])===1),l&5&&p(t,"selected",e[4]===e[0])},d(f){f&&g(t),s=!1,i()}}}function ye(e){let t,n=e[2],r=[];for(let o=0;o<n.length;o+=1)r[o]=I(G(e,n,o));return{c(){t=V("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){t=D(o,"DIV",{role:!0,class:!0});var s=Q(t);for(let i=0;i<r.length;i+=1)r[i].l(s);s.forEach(g),this.h()},h(){E(t,"role","radiogroup"),E(t,"class","svelte-9avveu")},m(o,s){F(o,t,s);for(let i=0;i<r.length;i+=1)r[i].m(t,null)},p(o,[s]){if(s&7){n=o[2];let i;for(i=0;i<n.length;i+=1){const u=G(o,n,i);r[i]?r[i].p(u,s):(r[i]=I(u),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},i:U,o:U,d(o){o&&g(t),re(r,o)}}}const Le=1,be=10;function Re(e,t,n){let r;oe(async()=>{n(0,r=await ge())});const o=u=>{r!=null&&u===r?(n(0,r=void 0),we()):(n(0,r=u),Me(u))},s=[];for(let u=Le;u<=be;u++)s.push(u);return[r,o,s,u=>o(u)]}class Ae extends ee{constructor(t){super(),te(this,t,Re,ye,ne,{})}}export{Ae as default};
